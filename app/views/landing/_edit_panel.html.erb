<%# app/views/landing/_edit_panel.html.erb %>
<%# locals: project:, landing:, template: %>

<div class="mt-4">
  <div id="save_notice"></div>

  <%= form_with url: project_landing_path(project),
                method: :patch,
                data: { turbo_frame: "project_panel" },
                class: "grid grid-cols-1 gap-6" do %>

    <% template.sections.each do |section| %>
      <div class="rounded-xl bg-white border border-gray-200 p-6 shadow-sm">
        <h3 class="font-semibold text-gray-800 mb-4">
          <i class="bi bi-sliders"></i> <%= section[:title] %>
        </h3>

        <% section[:field_keys].each do |field_key| %>
          <%= render "landing/field_input",
                     field_key: field_key,
                     template:  template,
                     landing:   landing %>
        <% end %>
      </div>
    <% end %>

    <div class="flex items-center justify-end gap-3">
      <span class="text-xs text-gray-500">Changes are saved to this projectâ€™s landing.</span>
      <button type="submit"
              class="inline-flex items-center gap-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg px-4 py-2 font-medium shadow-sm">
        <i class="bi bi-check2-circle"></i> Save changes
      </button>
    </div>
  <% end %>
</div>
