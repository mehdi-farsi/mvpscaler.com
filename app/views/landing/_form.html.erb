<%= turbo_frame_tag "cta_form" do %>
  <%= form_with model: @lead, url: project_leads_path(project_slug: @project.slug), data: { turbo: true },
                html: { class: "flex flex-col gap-3", "aria-label": "Join the waitlist" } do |f| %>
    <%= f.hidden_field :source, value: "hero" %>

    <div>
      <label for="lead_email" class="sr-only">Email</label>
      <%= f.email_field :email,
                        required: true,
                        placeholder: "Enter your email",
                        aria: {
                          invalid: (@lead.errors[:email].any?).to_s,
                          describedby: (@lead.errors[:email].any? ? "email-error" : nil)
                        },
                        class: [
                          "w-full rounded-lg bg-gray-800 text-white placeholder-gray-400 px-4 py-3",
                          "outline-none focus:ring-4 focus:ring-emerald-500 shadow-sm",
                          (@lead.errors[:email].any? ? "border border-red-500" : nil)
                        ].compact.join(" ") %>

      <% if @lead.errors[:email].any? %>
        <p id="email-error" class="mt-1 text-xs text-red-400">
          <%= @lead.errors[:email].first %>
        </p>
      <% end %>
    </div>

    <%= f.submit "Start Validating",
                 class: "rounded-lg bg-emerald-500 hover:bg-emerald-400 px-6 py-3 font-semibold text-white shadow-md transition" %>
  <% end %>

  <p class="mt-4 text-sm text-gray-500 text-center md:text-left">
    We respect your inbox. Unsubscribe anytime.
  </p>
<% end %>